<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Net Present Value • dynamicpv</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Net Present Value">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dynamicpv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/budget-impact-applications.html">Budget Impact Applications</a></li>
    <li><a class="dropdown-item" href="../articles/cost-effectiveness-applications.html">Cost-Effectiveness Applications</a></li>
    <li><a class="dropdown-item" href="../articles/math-framework.html">Mathematical Framework</a></li>
    <li><a class="dropdown-item" href="../articles/net-present-value.html">Net Present Value</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MSDLLCpapers/dynamicpv/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Net Present Value</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MSDLLCpapers/dynamicpv/blob/main/vignettes/net-present-value.Rmd" class="external-link"><code>vignettes/net-present-value.Rmd</code></a></small>
      <div class="d-none name"><code>net-present-value.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette describes how to use the <code>dynamicpv</code> package
to derive (Net) Present Values (NPVs) that account for dynamic (or
static) pricing, and dynamic (or static) uptake. We consider:</p>
<ul>
<li>NPV with static pricing and static uptake</li>
<li>NPV with dynamic pricing and static uptake, with prices increasing
regularly and irregularly</li>
<li>NPV with static pricing and dynamic uptake, with constant and
variable uptake over time</li>
<li>NPV with both dynamic pricing and dynamic uptake</li>
</ul>
<p>First let us load the packages we will use for this vignette.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://MSDLLCpapers.github.io/dynamicpv/">dynamicpv</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="npv-with-static-pricing-and-static-uptake">NPV with static pricing and static uptake<a class="anchor" aria-label="anchor" href="#npv-with-static-pricing-and-static-uptake"></a>
</h2>
<p>The NPV of a cashflow <span class="math inline">\(c_t\)</span> in
<span class="math inline">\(t\)</span> years time, assuming prices
constant in real terms and an annual discount rate of <span class="math inline">\(i_{real}\)</span> is calculated as follows:</p>
<p><span class="math display">\[NPV =
\frac{c_t}{(1+i_{real})^{t}}\]</span></p>
<p>It is overkill rather to use <code>dynamicpv</code> to calculate the
NPV of a cashflow that is constant in real terms, since there are
simpler routes to doing this. Nevertheless, let us start there, since it
helps understand functionality. We use a simple cashflow and <span class="math inline">\(i=3\%\)</span>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A simple cashflow</span></span>
<span><span class="va">cashflow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">110</span>, <span class="fl">120</span>, <span class="fl">130</span>, <span class="fl">140</span>, <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># (Real) discount rate of 3\% per timestep (year)</span></span>
<span><span class="va">disc</span> <span class="op">&lt;-</span> <span class="fl">0.03</span></span>
<span><span class="va">vt1</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">disc</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span> <span class="op">*</span> <span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The calculation can be presented in a table as follows.</p>
<table class="table">
<caption>Calculation of NPV from a simple cashflow and given discount
rate</caption>
<thead><tr class="header">
<th>Time</th>
<th>Cashflow</th>
<th>Discount factor</th>
<th>Product</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(t\)</span></td>
<td><span class="math inline">\(c_t\)</span></td>
<td><span class="math inline">\(v^t = (1+i)^{1-t}\)</span></td>
<td></td>
</tr>
<tr class="even">
<td>1</td>
<td>110</td>
<td>1</td>
<td>110</td>
</tr>
<tr class="odd">
<td>2</td>
<td>120</td>
<td>0.971</td>
<td>117</td>
</tr>
<tr class="even">
<td>3</td>
<td>130</td>
<td>0.943</td>
<td>123</td>
</tr>
<tr class="odd">
<td>4</td>
<td>140</td>
<td>0.915</td>
<td>128</td>
</tr>
<tr class="even">
<td>5</td>
<td>150</td>
<td>0.888</td>
<td>133</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>650</td>
<td></td>
<td>610</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run dynpv calculation with full output</span></span>
<span><span class="va">pv1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dynpv.html">dynpv</a></span><span class="op">(</span>payoffs<span class="op">=</span><span class="va">cashflow</span>, discrate<span class="op">=</span><span class="va">disc</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pv1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Summary of Dynamic Pricing and Uptake</span></span>
<span><span class="co">#&gt;      Number of cohorts:             5 </span></span>
<span><span class="co">#&gt;      Number of times:               1 </span></span>
<span><span class="co">#&gt;      Total uptake:                  1 </span></span>
<span><span class="co">#&gt;      Total present value:           610.4352 </span></span>
<span><span class="co">#&gt;      Mean present value:            610.4352</span></span></code></pre></div>
<p>The present value of this cashflow is 610. The same result could have
been found more easily than invoking this package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">vt1</span> <span class="op">*</span> <span class="va">cashflow</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 610.4352</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="npv-with-dynamic-pricing-and-static-uptake">NPV with dynamic pricing and static uptake<a class="anchor" aria-label="anchor" href="#npv-with-dynamic-pricing-and-static-uptake"></a>
</h2>
<p>Cashflows may not in general be expected to be constant in real
terms. Accordingly it can be preferable to explicitly estimate the
cashflow in nominal terms, <span class="math inline">\(c'_t = c_t
\cdot R_t\)</span>, and discount with a nominal discount rate that
includes expected inflation.</p>
<p><span class="math display">\[ 1+i_{nom} = (1+i_{real})(1+r_g)
\]</span> <span class="math display">\[NPV =
\frac{c'_t}{(1+i_{nom})^t} = \frac{c_t \cdot R_t}{(1+i_{nom})^t}
\]</span></p>
<div class="section level3">
<h3 id="prices-that-increase-regularly">Prices that increase regularly<a class="anchor" aria-label="anchor" href="#prices-that-increase-regularly"></a>
</h3>
<p>In this example, let us assume that prices of the resource underlying
the cashflow increases at 1 % per year, but that general price inflation
is 2.5 % per year. The real discount rate is unchanged at 3 % per year,
so the nominal discount rate is therefore approximately 5.5 % per
year.</p>
<p>First, we derive a price index to handle the changing price of the
resource underlying the cashflow. Then we derive the nominal discount
rate, incorporating the general rate of price inflation in the economy.
We then combine these inputs with <code><a href="../reference/dynpv.html">dynpv()</a></code> to calculate the
NPV.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up price index</span></span>
<span><span class="va">pinfl</span> <span class="op">&lt;-</span> <span class="fl">0.01</span></span>
<span><span class="va">pindex</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">pinfl</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">pindex</span></span>
<span><span class="co">#&gt; [1] 1.000000 1.010000 1.020100 1.030301 1.040604</span></span>
<span></span>
<span><span class="co"># Nominal discount rate</span></span>
<span><span class="va">nomdisc</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">disc</span><span class="op">)</span><span class="op">*</span><span class="fl">1.025</span><span class="op">-</span><span class="fl">1</span></span>
<span></span>
<span><span class="co"># Calculate present value</span></span>
<span><span class="va">pv2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dynpv.html">dynpv</a></span><span class="op">(</span>payoffs<span class="op">=</span><span class="va">cashflow</span>, prices<span class="op">=</span><span class="va">pindex</span>, discrate<span class="op">=</span><span class="va">nomdisc</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pv2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Summary of Dynamic Pricing and Uptake</span></span>
<span><span class="co">#&gt;      Number of cohorts:             5 </span></span>
<span><span class="co">#&gt;      Number of times:               1 </span></span>
<span><span class="co">#&gt;      Total uptake:                  1 </span></span>
<span><span class="co">#&gt;      Total present value:           591.9954 </span></span>
<span><span class="co">#&gt;      Mean present value:            591.9954</span></span></code></pre></div>
<p>The NPV of 592 could still have been calculated using base R
functions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare with more base calculations</span></span>
<span><span class="va">vt2</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">nomdisc</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span> <span class="op">*</span> <span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">vt2</span> <span class="op">*</span> <span class="va">cashflow</span> <span class="op">*</span> <span class="va">pindex</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 591.9954</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="prices-that-increase-irregularly">Prices that increase irregularly<a class="anchor" aria-label="anchor" href="#prices-that-increase-irregularly"></a>
</h3>
<p>Where <code>dynamicpv</code> is most relevant is when the price index
is more irregular, more dynamic. For example, one might anticipate a
sudden future change in a price of a certain resource (e.g. drug price
reduction on loss of exclusivity). This can be accommodated in the price
index. In this simple example, let us assume that the underlying price
of the resource reduces to half its original value from the fourth
year.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Revise the price index to be 0.5 from year 4</span></span>
<span><span class="va">pindex</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span><span class="va">pindex</span></span>
<span><span class="co">#&gt; [1] 1.0000 1.0100 1.0201 0.5000 0.5000</span></span>
<span></span>
<span><span class="co"># Calculate present value</span></span>
<span><span class="va">pv3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dynpv.html">dynpv</a></span><span class="op">(</span>payoffs<span class="op">=</span><span class="va">cashflow</span>, prices<span class="op">=</span><span class="va">pindex</span>, discrate<span class="op">=</span><span class="va">nomdisc</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pv3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Summary of Dynamic Pricing and Uptake</span></span>
<span><span class="co">#&gt;      Number of cohorts:             5 </span></span>
<span><span class="co">#&gt;      Number of times:               1 </span></span>
<span><span class="co">#&gt;      Total uptake:                  1 </span></span>
<span><span class="co">#&gt;      Total present value:           463.6326 </span></span>
<span><span class="co">#&gt;      Mean present value:            463.6326</span></span></code></pre></div>
<p>With this dynamic pricing change, the NPV has reduced by 128, from
592 to 464. The corresponding base R code is shown below.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare with more base calculations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">vt2</span> <span class="op">*</span> <span class="va">cashflow</span> <span class="op">*</span> <span class="va">pindex</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 463.6326</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="npv-with-static-pricing-and-dynamic-uptake">NPV with static pricing and dynamic uptake<a class="anchor" aria-label="anchor" href="#npv-with-static-pricing-and-dynamic-uptake"></a>
</h2>
<div class="section level3">
<h3 id="uptake-is-constant-over-time">Uptake is constant over time<a class="anchor" aria-label="anchor" href="#uptake-is-constant-over-time"></a>
</h3>
<p>Suppose we have one new patient each year, and we wish to calculate
the total NPV in a time horizon of 5 years. Now we have a payoff
triangle as follows.</p>
<table class="table">
<caption>Calculation of NPV from a simple cashflow and given discount
rate</caption>
<colgroup>
<col width="9%">
<col width="15%">
<col width="30%">
<col width="13%">
<col width="6%">
<col width="7%">
<col width="6%">
<col width="6%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th>Time</th>
<th>Cashflow 1</th>
<th>Cashflow 2</th>
<th>Cashflow 3</th>
<th>Cashflow 4</th>
<th>Cashflow 5</th>
<th>Cashflow Sum</th>
<th>Discount factor</th>
<th>Product</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(t\)</span></td>
<td><span class="math inline">\(c_t\)</span></td>
<td><span class="math inline">\(c_{t-1}\)</span></td>
<td><span class="math inline">\(c_{t-2}\)</span></td>
<td><span class="math inline">\(c_{t-3}\)</span></td>
<td><span class="math inline">\(c_{t-4}\)</span></td>
<td></td>
<td><span class="math inline">\(v^t = (1+i)^{1-t}\)</span></td>
<td></td>
</tr>
<tr class="even">
<td>1</td>
<td>110</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>110</td>
<td>1</td>
<td>110</td>
</tr>
<tr class="odd">
<td>2</td>
<td>120</td>
<td>110</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>230</td>
<td>0.971</td>
<td>223</td>
</tr>
<tr class="even">
<td>3</td>
<td>130</td>
<td>120</td>
<td>110</td>
<td>-</td>
<td>-</td>
<td>360</td>
<td>0.943</td>
<td>339</td>
</tr>
<tr class="odd">
<td>4</td>
<td>140</td>
<td>130</td>
<td>120</td>
<td>110</td>
<td>-</td>
<td>500</td>
<td>0.915</td>
<td>458</td>
</tr>
<tr class="even">
<td>5</td>
<td>150</td>
<td>140</td>
<td>130</td>
<td>120</td>
<td>110</td>
<td>650</td>
<td>0.888</td>
<td>578</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>650</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>1,708</td>
</tr>
</tbody>
</table>
<p>With <code><a href="../reference/dynpv.html">dynamicpv::dynpv()</a></code>, we just update the
<code>uptakes</code> argument.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Uptake vector is (1, 1, 1, 1, 1)</span></span>
<span><span class="va">uptakes1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># NPV calculation</span></span>
<span><span class="va">pv4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dynpv.html">dynpv</a></span><span class="op">(</span>payoffs<span class="op">=</span><span class="va">cashflow</span>, uptakes<span class="op">=</span><span class="va">uptakes1</span>, discrate<span class="op">=</span><span class="va">disc</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pv4</span><span class="op">)</span></span>
<span><span class="co">#&gt; Summary of Dynamic Pricing and Uptake</span></span>
<span><span class="co">#&gt;      Number of cohorts:             5 </span></span>
<span><span class="co">#&gt;      Number of times:               1 </span></span>
<span><span class="co">#&gt;      Total uptake:                  5 </span></span>
<span><span class="co">#&gt;      Total present value:           1707.723 </span></span>
<span><span class="co">#&gt;      Mean present value:            341.5446</span></span></code></pre></div>
<p>There are 5 patients with a total NPV of 1,708, which equates to 342
on average per patient. This can also be calculated in base R.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">vt1</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">cashflow</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1707.723</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="uptake-varies-over-time">Uptake varies over time<a class="anchor" aria-label="anchor" href="#uptake-varies-over-time"></a>
</h3>
<p>In general, uptake will not be constant in time. Due to factors such
as varying epidemiology (prevalence and incidence), prior treatment
pathways (patient testing, patient diagnostics, prior treatment usage),
as well as the specific uptake of the treatment of interest (patient
share), uptake will also be highly variable over time. In this setting,
the total and mean NPVs must reflect weightings applicable to each
cashflow.</p>
<p>For example, suppose the number of patients receiving treatment
increases by one each year. The weighting given to cashflow 1 would then
be <span class="math inline">\(1/(1+2+3+4+5)=6.67\)</span> %.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Uptake vector is (1, 2, 3, 4, 5)</span></span>
<span><span class="va">uptakes2</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span></span>
<span><span class="co"># NPV calculation</span></span>
<span><span class="va">pv5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dynpv.html">dynpv</a></span><span class="op">(</span>payoffs<span class="op">=</span><span class="va">cashflow</span>, uptakes<span class="op">=</span><span class="va">uptakes2</span>, discrate<span class="op">=</span><span class="va">disc</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pv5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Summary of Dynamic Pricing and Uptake</span></span>
<span><span class="co">#&gt;      Number of cohorts:             5 </span></span>
<span><span class="co">#&gt;      Number of times:               1 </span></span>
<span><span class="co">#&gt;      Total uptake:                  15 </span></span>
<span><span class="co">#&gt;      Total present value:           3841.785 </span></span>
<span><span class="co">#&gt;      Mean present value:            256.119</span></span></code></pre></div>
<p>There are 15 patients with a total NPV of 3,842, which equates to 256
on average per patient. Verifying this result in base R also becomes
more complicated.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Verifying total NPV is now more complicated</span></span>
<span><span class="va">checkpv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">checkpv</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">cashflow</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">i</span><span class="op">]</span> <span class="op">*</span> <span class="va">uptakes2</span><span class="op">[</span><span class="va">i</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">vt1</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">checkpv</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3841.785</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="npv-with-dynamic-pricing-and-dynamic-uptake">NPV with dynamic pricing and dynamic uptake<a class="anchor" aria-label="anchor" href="#npv-with-dynamic-pricing-and-dynamic-uptake"></a>
</h2>
<p>The package becomes most powerful when considering both dynamic
uptake and dynamic pricing. A simple call to
<code><a href="../reference/dynpv.html">dynamicpv::dynpv()</a></code> replaces what would be rather more
complicated with base functions, even in this toy example.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># NPV calculation</span></span>
<span><span class="va">pv6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dynpv.html">dynpv</a></span><span class="op">(</span>payoffs<span class="op">=</span><span class="va">cashflow</span>, uptakes<span class="op">=</span><span class="va">uptakes2</span>, prices<span class="op">=</span><span class="va">pindex</span>, discrate<span class="op">=</span><span class="va">nomdisc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculation results</span></span>
<span><span class="va">pv6</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 9</span></span></span>
<span><span class="co">#&gt;        j     k     l     t    uj    pk     R     v    pv</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1     1     0     1     1   110  1    1     110  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     1     2     0     2     1   120  1.01 0.947 115. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     1     3     0     3     1   130  1.02 0.897 119. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     1     4     0     4     1   140  0.5  0.850  59.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     1     5     0     5     1   150  0.5  0.805  60.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     2     1     0     2     2   110  1.01 0.947 210. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     2     2     0     3     2   120  1.02 0.897 220. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     2     3     0     4     2   130  0.5  0.850 110. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     2     4     0     5     2   140  0.5  0.805 113. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     3     1     0     3     3   110  1.02 0.897 302. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>     3     2     0     4     3   120  0.5  0.850 153. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>     3     3     0     5     3   130  0.5  0.805 157. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>     4     1     0     4     4   110  0.5  0.850 187. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>     4     2     0     5     4   120  0.5  0.805 193. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>     5     1     0     5     5   110  0.5  0.805 221.</span></span>
<span></span>
<span><span class="co"># Total present value = sum of the pv column</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">pv6</span><span class="op">$</span><span class="va">pv</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2330.349</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pv6</span><span class="op">)</span></span>
<span><span class="co">#&gt; Summary of Dynamic Pricing and Uptake</span></span>
<span><span class="co">#&gt;      Number of cohorts:             5 </span></span>
<span><span class="co">#&gt;      Number of times:               1 </span></span>
<span><span class="co">#&gt;      Total uptake:                  15 </span></span>
<span><span class="co">#&gt;      Total present value:           2330.349 </span></span>
<span><span class="co">#&gt;      Mean present value:            155.3566</span></span></code></pre></div>
<p>There are 15 patients with a total NPV of 2,330, which equates to 155
on average per patient.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dominic Muston, Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
